/**
帖子内容
*/
DROP TABLE IF EXISTS kk_form;
CREATE TABLE IF NOT EXISTS kk_form(
   id INT(11) NOT NULL AUTO_INCREMENT,
   title VARCHAR(200) CHARACTER SET utf8 NOT NULL,
   content VARCHAR(255) CHARACTER SET utf8 DEFAULT NULL,
   create_time DATETIME NOT NULL,
   u_uid VARCHAR (17) NOT NULL,
   PRIMARY KEY (id)
)ENGINE=InnoDB AUTO_INCREMENT=1 DEFAULT CHARSET=utf8;

/**
帖子图片
*/
DROP TABLE IF EXISTS kk_form_img;
CREATE TABLE IF NOT EXISTS kk_form_img(
   id INT(11) NOT NULL AUTO_INCREMENT,
   form_id INT(11) NOT NULL,
   img_url VARCHAR (255) CHARACTER SET utf8 NOT NULL,
   PRIMARY KEY (id)
)ENGINE=InnoDB AUTO_INCREMENT=1 DEFAULT CHARSET=utf8;


/**
帖子回复
*/
DROP TABLE IF EXISTS kk_form_replay;
CREATE TABLE IF NOT EXISTS kk_form_replay(
   id INT(11) NOT NULL AUTO_INCREMENT,
   form_id INT(11) NOT NULL,
   u_uid VARCHAR (17) CHARACTER SET utf8 NOT NULL,
   to_u_uid VARCHAR (17) CHARACTER SET utf8 NOT NULL,
   content VARCHAR(255) CHARACTER SET utf8 DEFAULT '',
   PRIMARY KEY (id)
)ENGINE=InnoDB AUTO_INCREMENT=1 DEFAULT CHARSET=utf8;

/**
帖子赞列表
*/
DROP TABLE IF EXISTS kk_form_zan;
CREATE TABLE IF NOT EXISTS kk_form_zan(
   id INT(11) NOT NULL AUTO_INCREMENT,
   form_id INT(11) NOT NULL,
   u_uid VARCHAR (17) CHARACTER SET utf8 NOT NULL,
   PRIMARY KEY (id)
)ENGINE=InnoDB AUTO_INCREMENT=1 DEFAULT CHARSET=utf8;
/**
登录签到 记录
*/
DROP TABLE if EXISTS kk_login_log;
CREATE TABLE if NOT EXISTS kk_login_log(
 id INT(11) NOT NULL AUTO_INCREMENT,
 u_uid VARCHAR (17) CHARACTER SET utf8 NOT NULL,
 create_time DATETIME NOT NULL,
 PRIMARY KEY (id)
)ENGINE=InnoDB AUTO_INCREMENT=1 DEFAULT CHARSET=utf8;
/**
登录签到 次数
*/
DROP TABLE if EXISTS kk_login_sign;
CREATE TABLE if NOT EXISTS kk_login_sign(
 id INT(11) NOT NULL AUTO_INCREMENT,
 u_uid VARCHAR (17) CHARACTER SET utf8 NOT NULL,
 num INT(11) not null DEFAULT 0,
 create_time DATETIME NOT NULL,
 PRIMARY KEY (id)
)ENGINE=InnoDB AUTO_INCREMENT=1 DEFAULT CHARSET=utf8;

/**
联系我们记录
*/
DROP  TABLE if EXISTS kk_join_info;
CREATE TABLE if NOT EXISTS kk_join_info(
  id INT(11) NOT NULL AUTO_INCREMENT,
  name VARCHAR (255) DEFAULT NULL ,
  phone VARCHAR (15) DEFAULT NULL ,
  content VARCHAR (255) DEFAULT null,
  address varchar (255) DEFAULT null,
   PRIMARY KEY (id)
)ENGINE=InnoDB AUTO_INCREMENT=1 DEFAULT CHARSET=utf8;

ALTER  TABLE kk_product_activity ADD limit_num int(5) DEFAULT 0; //限购数量
ALTER  TABLE kk_product_activity ADD surplus_num int(5) DEFAULT 0; //剩余数量
ALTER TABLE kk_product add code VARCHAR (50) DEFAULT NULL ; //产品条形码
/**
用户积分
*/
DROP  TABLE if EXISTS kk_integral;
CREATE TABLE if not EXISTS kk_integral(
 id int(11) not null AUTO_INCREMENT,
 u_uid VARCHAR (17) CHARACTER SET utf8 NOT NULL,
 integral int(11) not null DEFAULT 0,
 create_time DATETIME NOT NULL,
 PRIMARY KEY (id)
)ENGINE=InnoDB AUTO_INCREMENT=1 DEFAULT CHARSET=utf8;

ALTER TABLE kk_shop_activity add activity_id int not null DEFAULT 0; //活动类型(新手/抢购/团购/预售)

DROP TABLE if EXISTS kk_activity;
CREATE TABLE if not EXISTS kk_activity(
 id int(11) not null AUTO_INCREMENT,
 name varchar(100) CHARACTER SET utf8 not null,
 PRIMARY  KEY (id)
)ENGINE=InnoDB AUTO_INCREMENT=1 DEFAULT CHARSET=utf8;

ALTER TABLE kk_product_activity add p_type_id int not null DEFAULT 0,
 add p_type_name VARCHAR(100) CHARACTER set utf8 not null,
 add p_brand_id int not null DEFAULT 0,
 add p_brand_name VARCHAR(100) CHARACTER set utf8 not null


/**
*2015-12-8 节点
*/
alter TABLE kk_product add p_number int not null DEFAULT 0,add supplier_price DECIMAL;

DROP TABLE if EXISTS kk_product_log;
CREATE TABLE if NOT EXISTS kk_product_log(
 id int(11) not null AUTO_INCREMENT,
 p_id int(11) not null,
 price DECIMAL,
 market_price DECIMAL ,
 supplier_price DECIMAL,
 p_number int not null DEFAULT 0,
 create_time DATETIME NOT NULL,
 PRIMARY  KEY (id)
)ENGINE=InnoDB AUTO_INCREMENT=1 DEFAULT CHARSET=utf8;

DROP TABLE if EXISTS kk_product_data;
  CREATE TABLE if not EXISTS kk_product_data(
  id int(11) not null AUTO_INCREMENT,
  p_category_id int (11) not null DEFAULT 0,
  p_type_id int (11) not null DEFAULT 0,
  p_brand_id int (11) not null DEFAULT 0,
  p_category_name varchar(255) DEFAULT null,
  p_type_name varchar(255) DEFAULT null,
  p_brand_name varchar(255) DEFAULT null,
  name varchar(255) DEFAULT null,
  p_unit_name varchar(25) DEFAULT null,
  txm_code VARCHAR (50)DEFAULT null,
  min_stock_all int(11) DEFAULT 0,
  min_stock_shop int(11) DEFAULT 0,
  supplier_price DECIMAL,
  box_specification int(11) DEFAULT 0,
  min_quantity int (11)  DEFAULT 0,
  quantity int(11)  DEFAULT 0,
  p_desc VARCHAR(255) DEFAULT null,
  gross_profit int(11)  DEFAULT 0,
  PRIMARY  KEY (id)
)ENGINE=InnoDB AUTO_INCREMENT=1 DEFAULT CHARSET=utf8;

ALTER TABLE  kk_order_activity add s_uid VARCHAR (17) not null
ALTER TABLE kk_shop add scope VARCHAR(17) DEFAULT null;

ALTER TABLE kk_shop_activity add price_rule VARCHAR (255) DEFAULT null;


DROP TABLE if EXISTS kk_push_content;
CREATE TABLE kk_push_content(
id int(11) NOT null AUTO_INCREMENT,
content VARCHAR(255) not null ,
push_time int(11) DEFAULT 0,
PRIMARY  KEY (id)
)ENGINE=InnoDB AUTO_INCREMENT=1 DEFAULT CHARSET=utf8;

ALTER TABLE kk_order add remark VARCHAR (255);
ALTER TABLE kk_order_activity add remark VARCHAR (255);

ALTER TABLE  kk_shop_product add sort_id int(4) DEFAULT 1;

DROP TABLE if EXISTS kk_form_irr;
CREATE TABLE kk_form_irr(
  id int(11) NOT null AUTO_INCREMENT,
  form_id int(11) not null,
  uid VARCHAR(17) not null,
  cause VARCHAR(255),
  PRIMARY  KEY (id)
)ENGINE=InnoDB AUTO_INCREMENT=1 DEFAULT CHARSET=utf8;

ALTER TABLE  kk_login_sign add mg int(2) not null default 1;